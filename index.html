<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />

    <!--
    Using 2 different css for foundation and the application, because foundation
    generated css file is not going to change frequently, and its scss scripts are huge to compile
    => let's separate it from the general purpose dev sass compilation
     -->
    <link rel="stylesheet" href="dist/vendors.css" />
    <link rel="stylesheet" href="dist/app.css" />

    <title>lit-element, constructed stylesheets and typescript demo</title>
  </head>
  <body>
    <action-button name="Inside a web component"></action-button>
    <button type="button" class="success button primary">Outside a web component</button>

    <script type="module">
      // See wonderful blog post from k33g_org : https://k33g.gitlab.io/articles/2019-09-01-LITELEMENT-STARTER.html
      import { css, unsafeCSS } from './web_modules/lit-element.js'

      window.constructibleStyleSheets = {};
      const styleSheetPromise = (cssPath, variableName) => fetch(cssPath)
              .then(response => response.text())
              .then(cssRaw => {
                const cssResult = css`${unsafeCSS(cssRaw)}`;
                window.constructibleStyleSheets[variableName] = cssResult;
              }).catch(error => console.error(`ðŸ˜¡ [${variableName}]`, error));

      Promise.all([
        styleSheetPromise("./dist/vendors.css", "vendors"),
        styleSheetPromise("./dist/app.css", "app")
      ]).then(styleSheets => {
        import("./dist/index.js");
      });
    </script>
  </body>
</html>
